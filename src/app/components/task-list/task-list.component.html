<!-- src/app/components/task-list/task-list.component.html -->
<div class="task-list-container">
  <div class="tasks" *ngIf="taskService.filteredTasks().length > 0; else noTasks">
    <div
      *ngFor="let task of taskService.filteredTasks(); trackBy: trackByTaskId"
      class="task-item"
      [class.completed]="task.completed"
    >
      <!-- Task content -->
      <div class="task-content" *ngIf="editingTaskId !== task.id">
        <button
          (click)="toggleTask(task)"
          class="toggle-button"
          [class.checked]="task.completed"
          [title]="task.completed ? 'Mark as active' : 'Mark as completed'"
        >
          <span class="checkmark" *ngIf="task.completed">✓</span>
        </button>
        
        <span
          class="task-title"
          (dblclick)="startEditing(task)"
          [title]="'Double-click to edit. Created: ' + (task.createdAt | date:'medium')"
        >
          {{ task.title }}
        </span>
        
        <div class="task-actions">
          <button
            (click)="startEditing(task)"
            class="edit-button"
            title="Edit task"
          >
            ✏️
          </button>
          <button
            (click)="deleteTask(task)"
            class="delete-button"
            title="Delete task"
          >
            ❌
          </button>
        </div>
      </div>

      <!-- Edit mode -->
      <div class="task-edit" *ngIf="editingTaskId === task.id">
        <input
          type="text"
          [formControl]="editControl"
          (keydown)="onEditKeydown($event)"
          (blur)="saveEdit()"
          class="edit-input"
          #editInput
        >
        <div class="edit-actions">
          <button (click)="saveEdit()" class="save-button" title="Save">✅</button>
          <button (click)="cancelEditing()" class="cancel-button" title="Cancel">❌</button>
        </div>
      </div>
    </div>
  </div>

  <ng-template #noTasks>
    <div class="no-tasks">
      <div class="no-tasks-icon">📋</div>
      <h3>No tasks found</h3>
      <p *ngIf="taskService.filterSignal() === 'active'">
        All tasks are completed! 🎉
      </p>
      <p *ngIf="taskService.filterSignal() === 'completed'">
        No completed tasks yet.
      </p>
      <p *ngIf="taskService.filterSignal() === 'all'">
        Add your first task above to get started.
      </p>
    </div>
  </ng-template>
</div>
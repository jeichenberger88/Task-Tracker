:80 {
    root * /usr/share/caddy
    encode gzip
    
    # Handle manifest.webmanifest specifically
    handle /manifest.webmanifest {
        header Content-Type application/manifest+json
        file_server
    }
    
    # Handle all static files
    @static {
        file
    }
    handle @static {
        file_server
    }

    # SPA routing for everything else
    handle {
        rewrite * /index.html
        file_server
    }
    
    # Security headers
    header {
        X-Content-Type-Options nosniff
        X-Frame-Options DENY
        X-XSS-Protection "1; mode=block"
    }
}